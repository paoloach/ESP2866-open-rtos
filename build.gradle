buildscript {
    ext.kotlin_version = '1.2.50'

    repositories {
        mavenCentral()
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

plugins {
    id 'org.jetbrains.intellij' version '0.3.3'
    id "org.jetbrains.kotlin.jvm" version "1.2.50"
}

group 'plugin.achdjian.it'
version '1.0'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
    compile "org.jetbrains.kotlin:kotlin-stdlib"
    compileOnly files('/opt/clion/lib/clion.jar')
}

intellij {
    version '2018.1.4'
    pluginName 'ESP2866'
}
patchPluginXml {
    changeNotes """
      First release
      """
}

compileKotlin {
    kotlinOptions.jvmTarget = 1.8
}

task copyPlugin(type: Copy){

    from file("${buildDir}/libs/ESP2866-1.0-SNAPSHOT.jar")
    into file("${project.gradle.gradleUserHomeDir}/../.CLion2018.1/config/plugins/ESP2866/lib")
}

task execCLion(type: Exec) {
    workingDir='~'
    commandLine '/opt/clion/bin/clion_debug.sh'
}


